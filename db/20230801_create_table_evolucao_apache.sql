CREATE SCHEMA evolucoes;

CREATE TABLE evolucoes.apache2_opcoes (
    id SERIAL,
    questao INTEGER NOT NULL,
    label VARCHAR (50) NOT NULL,
    pontuacao INTEGER NOT NULL,
    PRIMARY KEY (id)
);

INSERT INTO evolucoes.apache2_opcoes (questao, label, pontuacao) VALUES
(1, '>=  41', 4),
(1, '39 a 40,9', 3),
(1, '38,5 a 38,9', 1),
(1, '36 a 38,4', 0),
(1, '34 a 35,9', 1),
(1, '32 a 33,9', 2),
(1, '30 a 31,9', 3),
(1, '<= 29,9', 4),
(2, '> 160', 4),
(2, '130 a 159', 3),
(2, '110 a 129', 2),
(2, '70 a 109', 0),
(2, '50 a 69', 2),
(2, '<= 49', 4),
(3, '>= 180', 4),
(3, '140 a 179', 3),
(3, '110 a 139', 2),
(3, '70 a 109', 0),
(3, '55 a 69', 2),
(3, '40 a 54', 3),
(3, '<= 39', 4),
(4, '>= 50', 4),
(4, '35 a 49', 3),
(4, '25 a 34', 1),
(4, '12 a 24', 0),
(4, '10 a 11', 1),
(4, '6 a 9', 2),
(4, '<= 5', 4),
(5, '>= 500', 4),
(5, '350 a 499', 3),
(5, '200 a 349', 2),
(5, '< 200 ou PaO2 > 70', 0),
(5, 'PaO2 de 61 a 70', 1),
(5, 'PaO2 de 55 a 60', 3),
(5, 'PaO2 < 55', 4),
(6, 'arterial>= 7,7; >= 52', 4),
(6, '7,6 a 7,69 ; 41 a 51,9', 3),
(6, '7,5 a 7,59 ; 32 a 40,9', 1),
(6, '7,33 a 7,49 ; 22 a 31,9', 0),
(6, '7,25 a 7,32 ; 18 a 21,9', 2),
(6, '7,15 a 7,24 ; 15 a 17,9', 3),
(6, '< 7,15 ; < 15', 4),
(7, '>= 180', 4),
(7, '160 a 179', 3),
(7, '155 a 159', 2),
(7, '150 a 154', 1),
(7, '130 a 149', 0),
(7, '120 a 129', 2),
(7, '111 a 119', 3),
(7, '< 110', 4),
(8, '>= 7', 4),
(8, '6 a 6,9', 3),
(8, '5,5 a 5,9', 1),
(8, '3,5 a 5,4', 0),
(8, '3 a 3,4', 1),
(8, '2,5 a 2,9', 2),
(8, '< 2,5', 4),
(9, '>= 3,5', 4),
(9, '> 3,5 na ARF', 8),
(9, '2 a 3,4', 3),
(9, '2 a 3,4 na ARF', 6),
(9, '1,5 a 1,9', 2),
(9, '1,5 a 1,9 na ARF', 4),
(9, '0,6 a 1,4', 0),
(9, '< 0,6', 2),
(10, '>= 60', 4),
(10, '50 a 59,9', 2),
(10, '46 a 49,9', 1),
(10, '30 a 45,9', 0),
(10, '20 a 29,9', 2),
(10, '< 20', 4),
(11, '>= 40', 4),
(11, '20 a 39,9', 2),
(11, '15 a 19,9', 1),
(11, '3 a 14,9', 0),
(11, '1 a 2,9', 2),
(11, '< 1', 4),
(12, '15', 0),
(12, '14', 1),
(12, '13', 2),
(12, '12', 3),
(12, '11', 4),
(12, '10', 5),
(12, '9', 6),
(12, '8', 7),
(12, '7', 8),
(12, '6', 9),
(12, '5', 10),
(12, '4', 11),
(12, '<=3', 12),
(13, '>= 75', 6),
(13, '65 a 74', 5),
(13, '55 a 64', 3),
(13, '45 a 54', 2),
(13, '<= 44', 0),
(14, 'nenhum', 0),
(14, 'não cirúrgico', 5),
(14, 'cirurgia de emergência', 5),
(14, 'cirurgia eletiva', 2);


CREATE TABLE evolucoes.apache2 (
    id SERIAL,
    prontuario INTEGER NOT NULL,
    dthr_preenchimento TIMESTAMP NOT NULL,
    temperatura INTEGER NOT NULL,
    pressao_arterial_media INTEGER NOT NULL,
    frequencia_cardiaca INTEGER NOT NULL,
    frequencia_respiratoria INTEGER NOT NULL,
    aapo2 INTEGER NOT NULL,
    ph INTEGER NOT NULL,
    na_serico INTEGER NOT NULL,
    k_serico INTEGER NOT NULL,
    creatinina INTEGER NOT NULL,
    hematocrito INTEGER NOT NULL,
    wbc INTEGER NOT NULL,
    glasgow INTEGER NOT NULL,
    idade INTEGER NOT NULL,
    problemas_saude_cronicos INTEGER NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (temperatura) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (pressao_arterial_media) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (frequencia_cardiaca) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (aapo2) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (ph) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (na_serico) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (k_serico) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (creatinina) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (hematocrito) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (wbc) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (glasgow) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (idade) REFERENCES evolucoes.apache2_opcoes (id),
    FOREIGN KEY (problemas_saude_cronicos) REFERENCES evolucoes.apache2_opcoes (id)
);

-- Teste pull request
